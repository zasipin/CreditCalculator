"use strict";angular.module("myApp",["ngRoute","myApp.filters","myApp.services","myApp.directives","myApp.controllers","LocalStorageModule"]).config(["localStorageServiceProvider",function(e){e.prefix="cr"}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/main.html",controller:"mainCtrl"}),e.when("/payments/:months",{templateUrl:"partials/paymentsTimetable.html",controller:"paymentsController"}),e.otherwise({redirectTo:"/",controller:"mainCtrl"})}]).constant("appConfig",{emailToAdress:"creditcalculator.developer@gmail.com",emailToText:"Написать разработчику"});
"use strict";var servicesModule=angular.module("myApp.services",[]);servicesModule.value("version","1.0.0");
"use strict";angular.module("myApp.services").service("CreditBoard",["localStorageService","CreditCount","creditCalculator","creditData",function(t,e,r,n){var s=function(e){e=angular.extend({},this.defaultSettings,e),e.percentsYear=t.get("percentsYear")||e.percentsYear,e.creditSum=t.get("creditSum")||e.creditSum,this.percentsYear=e.percentsYear,this.inflation=e.inflation,this.creditSum=e.creditSum,this.countYears=e.countYears,this.percentsYearSlide=this.percentsYear,this.percentsPerMonth=0,this.updatePercentsMonth(this.percentsYear),this.creditCountsInit(),this.creditCounts=r.getCredits()};return s.prototype={monthsInYear:12,percentsMonth:function(t){return this.updatePercentsMonth(t),100*this.percentsPerMonth},percentsReal:function(t,e){return 100*((1+t/100)/(1+e/100)-1)},creditCountsInit:function(){var t=12,n=12,s=this.monthsInYear*this.countYears;for(r.clearCredits();s>=n;n+=t)r.addCredit(new e({months:n,annualPercent:this.percentsYear,creditAmount:this.creditSum}))},updatePercentsMonth:function(t){this.percentsPerMonth=t/this.monthsInYear/100},recalculate:function(e,s){this.updatePercentsMonth(e),r.recalculate(e,s),n.update(e,s),t.set("creditSum",s),t.set("percentsYear",e)},updateAfterInputPercents:function(t,e){this.percentsYearSlide=t,this.recalculate(t,e)},updateAfterSlidePercents:function(t,e){this.percentsYear=+t,this.recalculate(t,e)}},s.prototype.defaultSettings={percentsYear:10,inflation:1,creditSum:1e5,countYears:25},s}]);
"use strict";angular.module("myApp.services").service("creditCalculator",[function(){var t=function(){this.credits=[]};return t.prototype={addCredit:function(t){this.credits.push(t)},removeCredit:function(){this.credits.pop()},recalculate:function(t,e){for(var r=0;r<this.credits.length;r++)this.credits[r].recalculate(t,e)},getCredits:function(){return this.credits},clearCredits:function(t){this.credits=[]},getInstance:function(){return new t}},new t}]);
"use strict";angular.module("myApp.services").service("CreditCount",function(){var t=function(t){this.months=t.months>=0?t.months||0:0,this.isForRecentDifference=t.isForRecentDifference||!1,this.annuitetCoefficient=0,this.monthlyPay=0,this.totalPay=0,this.overpay=0,this.overpayPercentage=0,this.recentYearDifference=0,this.creditAmount=t.creditAmount||0,this.annualPercent=t.annualPercent||0,this.recalculate(this.annualPercent,this.creditAmount)};return t.prototype.monthsInYear=12,t.prototype.recalculate=function(e,n){var i,s=e/this.monthsInYear/100,a=Math.pow(1+s,this.months);this.updateCoefficients(e,n),1===a?this.annuitetCoefficient=0:this.annuitetCoefficient=s*a/(a-1),this.monthlyPay=n*this.annuitetCoefficient,this.totalPay=this.monthlyPay*this.months,this.overpay=this.totalPay-n,0===n?this.overpayPercentage=0:this.overpayPercentage=this.overpay/n*100,this.isForRecentDifference||(i=new t({months:this.months-this.monthsInYear,annualPercent:this.annualPercent,creditAmount:this.creditAmount,isForRecentDifference:!0}),this.recentYearDifference=0===i.totalPay?0:this.overpayPercentage-i.overpayPercentage)},t.prototype.updateCoefficients=function(t,e){this.creditAmount=e||0,this.annualPercent=t||0},t});
"use strict";angular.module("myApp.services").service("CreditCountPayments",["CreditCount",function(t){var e=function(t){this.months=t.months>=0?t.months||0:0,this.annuitetCoefficient=0,this.monthlyPay=0,this.totalPay=0,this.creditAmount=t.creditAmount||0,this.annualPercent=t.annualPercent||0,this.recalculate(this.annualPercent,this.creditAmount),this.paymentToCredit=0,this.paymentToPercents=0,this.leftToPay=0,this.extraPayment=t.extraPayment||0,this.recalculate(this.annualPercent,this.creditAmount)};return e.prototype=Object.create(t.prototype),e.prototype.recalculate=function(t,e,n){var i=t/this.monthsInYear/100,a=Math.pow(1+i,this.months);this.creditAmount=e,this.extraPayment=n||this.extraPayment,1===a?this.annuitetCoefficient=0:this.annuitetCoefficient=i*a/(a-1),this.monthlyPay=e*this.annuitetCoefficient,this.paymentToPercents=t*e/100/12,this.paymentToCredit=this.monthlyPay-this.paymentToPercents,this.leftToPay=this.creditAmount-this.paymentToCredit-this.extraPayment},e}]);
"use strict";angular.module("myApp.services").service("creditData",function(){this.creditSum=this.creditSum||0,this.creditPeriod=this.creditPeriod||0,this.percents=this.percents||0,this.update=function(t,i,e){this.percents=t,this.creditSum=i,this.creditPeriod=e}});
"use strict";angular.module("myApp.controllers",[]).controller("mainCtrl",["$scope",function(o){}]).controller("paymentsController",["$scope","$routeParams",function(o,n){o.months=n.months}]);
"use strict";angular.module("myApp.filters",[]).filter("interpolate",["version",function(r){return function(e){return String(e).replace(/\%VERSION\%/gm,r)}}]);
"use strict";angular.module("myApp.directives",[]).directive("appVersion",["version",function(t){return function(e,r,n){r.text(t)}}]).directive("mailTo",function(){return{restrict:"EA",templateUrl:"partials/mailTo.html",scope:{},controller:["$scope","$element","$attrs","appConfig",function(t,e,r,n){t.appConfig=n}]}}).directive("creditDashboard",function(){return{link:function(t,e,r){},restrict:"EA",templateUrl:"partials/creditDashboard.html",scope:{},controller:["$scope","$element","$attrs","CreditBoard",function(t,e,r,n){t.board=new n({percentsYear:22,inflation:7,creditSum:1e5});var i=t.board;t.$watch("board.percentsYear",function(t,e){i.updateAfterInputPercents(t,i.creditSum)})}]}});
angular.module("myApp.directives").directive("paymentsTimetable",function(){return{link:function(e,t,n){},restrict:"EA",templateUrl:"js/directives/paymentsTimetable/payments.html",scope:{months:"@"},controller:["$scope","$element","$attrs","creditData","creditCalculator","CreditCountPayments","localStorageService",function(e,t,n,a,r,c,m){var s,i=r.getInstance(),o=new c({months:0,annualPercent:0,creditAmount:0}),l=a.percents||m.get("percentsYear"),u=a.creditSum||m.get("creditSum"),d=0,p=function(t){var n=t||{};if(n instanceof c){n.recalculate(n.annualPercent,n.creditAmount,n.extraPayment);for(var a=1;a<e.payments.length;a++)e.payments[a].recalculate(e.payments[a-1].annualPercent,e.payments[a-1].leftToPay)}};e.payments=[],e.months=+e.months,e.creditSum=u,e.percentsYear=l,e.updatePayments=function(e){p(e)};for(var y=e.months;y>0;y--)u-=d,s=new c({months:y,annualPercent:l,creditAmount:u}),i.addCredit(s),o=s,d=s.monthlyPay-l*u/100/12;e.payments=i.getCredits()}]}});
!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-61833900-1","auto"),ga("send","pageview");
!function(t,e,a){(e[a]=e[a]||[]).push(function(){try{e.yaCounter29684095=new Ya.Metrika({id:29684095,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})}catch(t){}});var c=t.getElementsByTagName("script")[0],n=t.createElement("script"),r=function(){c.parentNode.insertBefore(n,c)};n.type="text/javascript",n.async=!0,n.src=("https:"==t.location.protocol?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js","[object Opera]"==e.opera?t.addEventListener("DOMContentLoaded",r,!1):r()}(document,window,"yandex_metrika_callbacks");